from sklearn.feature_selection import SelectKBest
import numpy as np
from sklearn import cross_validation
from sklearn.ensemble import RandomForestClassifier


def main():
    inp = open('C:/Users/Abhi/workspace/MalwareClassification/ASMTRAINFULLDATA.csv','r')
    trainData = inp.readlines()
    trainData = trainData[2:]
    td=[]
    print len(trainData)
    for line in trainData:
        td.append(line.split(','))
    out = []    
    #print len(td[2])
    for i in range(len(td)):
        out.append(int(td[i][1]))
        td[i] = td[i][2:-1]
        for j in range(len(td[0])):
            td[i][j] = int(td[i][j])
    
    '''for i in range(len(td)):
        nConstant = sum(td[i])
        for j in range(len(td[0])):
            td[i][j] =td[i][j]/nConstant
    '''        
    
    #print td[0]        
            
    #print len(td[0])
    clf = SelectKBest(k=100)
    b = clf.fit_transform(td,out)
    #print b[0]
    j =clf.get_support(indices =True)
    #print len(b), len(b[0])
    #print j
    '''k=0
    for pt in out:
        print pt
        if pt ==5:
            k+=1
    print k'''
        
    
    #c=0
    #print b
    #X_train, X_test, y_train, y_test = cross_validation.train_test_split(b, out, test_size=0.4, random_state=0)
if __name__ == '__main__':
    main()